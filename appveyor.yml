branches:
  only:
    - jdk-next-win

version: '{build}'

image: Visual Studio 2017

environment:
    matrix:
        - JAVA_HOME: C:\jdk12\jdk-12
platform:
  - x64

install:
  - appveyor DownloadFile https://download.java.net/java/early_access/jdk12/22/GPL/openjdk-12-ea+22_windows-x64_bin.zip -FileName C:\jdk.zip
  - ps: Expand-Archive -Path C:\jdk.zip -DestinationPath C:\jdk12 -Verbose
  - appveyor DownloadFile http://www.us.apache.org/dist/maven/maven-3/3.6.0/binaries/apache-maven-3.6.0-bin.zip -FileName C:\maven.zip
  - ps: Expand-Archive -Path C:\maven.zip -DestinationPath C:\maven -Verbose
  - cmd: SET M2_HOME=C:\maven\apache-maven-3.6.0
  - cmd: SET JAVA_HOME=C:\jdk12\jdk-12
  - cmd: SET PATH=%JAVA_HOME%\bin;%M2_HOME%\bin;%PATH%
  - cmd: refreshenv
  - java -version
  - mvn -version

build_script:
  - mvn --batch-mode clean package -DskipTests

test_script:
  - mvn --batch-mode clean package

cache:
 - C:\Users\appveyor\.m2
